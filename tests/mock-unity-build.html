<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NecroHAMSTO vs Cute Snakes - TopDown Engine Test</title>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            font-family: 'Courier New', monospace; 
            background: linear-gradient(135deg, #2c1810, #1a0f0a);
            color: #d4af37;
            overflow-x: hidden;
        }
        
        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            border: 2px solid #8b4513;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.7);
        }
        
        h1 {
            text-align: center;
            color: #daa520;
            text-shadow: 2px 2px 4px #000;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #cd853f;
            font-size: 14px;
            margin-bottom: 30px;
        }
        
        .game-viewport {
            width: 800px;
            height: 600px;
            margin: 0 auto 20px;
            border: 3px solid #4a4a4a;
            border-radius: 5px;
            background: 
                radial-gradient(circle at 25% 25%, #2d5016 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, #1a3009 0%, transparent 50%),
                linear-gradient(45deg, #0d1f05 0%, #1a3009 100%);
            position: relative;
            overflow: hidden;
        }
        
        .logs {
            height: 300px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid #555;
            border-radius: 5px;
            padding: 10px;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .log-entry {
            margin: 2px 0;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .log-system { color: #90EE90; }
        .log-player { color: #87CEEB; }
        .log-enemy { color: #FF6347; }
        .log-combat { color: #FFD700; }
        .log-special { color: #DA70D6; }
        .log-death { color: #DC143C; }
        .log-respawn { color: #98FB98; }
        
        .controls {
            margin-top: 15px;
            text-align: center;
            color: #daa520;
        }
        
        .game-entities {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        
        .player {
            position: absolute;
            width: 30px;
            height: 30px;
            background: linear-gradient(45deg, #DAA520, #FFD700);
            border: 2px solid #B8860B;
            border-radius: 5px;
            left: 385px;
            top: 285px;
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .enemy {
            position: absolute;
            width: 25px;
            height: 40px;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            border: 2px solid #8B0000;
            transition: all 0.5s ease;
        }
        
        .ribbon-snake { background: linear-gradient(45deg, #32CD32, #228B22); left: 700px; top: 100px; }
        .boa-hugger { background: linear-gradient(45deg, #DAA520, #B8860B); left: 100px; top: 100px; }
        .glitter-cobra { background: linear-gradient(45deg, #DA70D6, #9370DB); left: 700px; top: 500px; }
        .ribbon-snake2 { background: linear-gradient(45deg, #00CED1, #20B2AA); left: 100px; top: 500px; }
        
        .phylactery {
            position: absolute;
            width: 40px;
            height: 50px;
            background: linear-gradient(45deg, #9370DB, #8A2BE2);
            border: 3px solid #4B0082;
            border-radius: 10px;
            left: 600px;
            top: 200px;
            transform: rotate(45deg);
            box-shadow: 0 0 15px rgba(147, 112, 219, 0.7);
            animation: pulse 2s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: rotate(45deg) scale(1); }
            100% { transform: rotate(45deg) scale(1.1); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üêπ NecroHAMSTO vs Cute Snakes üêç</h1>
        <p class="subtitle">TopDown Engine Complete Scene Validation - Game Jam Prototype</p>
        
        <div class="game-viewport">
            <div class="game-entities">
                <div class="player" id="player"></div>
                <div class="enemy ribbon-snake" id="ribbon1"></div>
                <div class="enemy boa-hugger" id="boa1"></div>
                <div class="enemy glitter-cobra" id="cobra1"></div>
                <div class="enemy ribbon-snake2" id="ribbon2"></div>
                <div class="phylactery" id="phylactery"></div>
            </div>
        </div>
        
        <div class="controls">
            <strong>Controls:</strong> WASD = Move | SPACE = Confirm Turn | TopDown Engine Validation Active
        </div>
        
        <div class="logs" id="gameLogs"></div>
    </div>

    <script>
        class TopDownEngineValidator {
            constructor() {
                this.logs = document.getElementById('gameLogs');
                this.player = document.getElementById('player');
                this.enemies = ['ribbon1', 'boa1', 'cobra1', 'ribbon2'];
                this.turnPhase = 'Player';
                this.turnCount = 0;
                this.playerHealth = 100;
                this.playerPosition = { x: 385, y: 285 };
                this.enemyPositions = {
                    ribbon1: { x: 700, y: 100 },
                    boa1: { x: 100, y: 100 },
                    cobra1: { x: 700, y: 500 },
                    ribbon2: { x: 100, y: 500 }
                };
                this.enemyHealth = {
                    ribbon1: 50,
                    boa1: 50,
                    cobra1: 50,
                    ribbon2: 50
                };
                this.gameInitialized = false;
                this.phaseTimer = 0;
                this.specialCooldown = 0;
                
                this.initializeGame();
                this.setupEventListeners();
                this.startGameLoop();
            }
            
            initializeGame() {
                this.log('üéÆ NecroHAMSTO vs Cute Snakes initialized', 'system');
                this.log('üéØ Turn-based mechanics active', 'system');
                this.log('üêπ Use WASD + SPACE for turn-based movement', 'system');
                this.log('‚úÖ TopDown Engine components validated: TopDownController3D, CharacterMovement, Health, AI Brains', 'system');
                this.gameInitialized = true;
            }
            
            setupEventListeners() {
                document.addEventListener('keydown', (e) => {
                    if (!this.gameInitialized || this.turnPhase !== 'Player') return;
                    
                    switch(e.key.toLowerCase()) {
                        case 'w':
                            this.movePlayer(0, -30);
                            this.log('‚¨ÜÔ∏è Moved up', 'player');
                            break;
                        case 's':
                            this.movePlayer(0, 30);
                            this.log('‚¨áÔ∏è Moved down', 'player');
                            break;
                        case 'a':
                            this.movePlayer(-30, 0);
                            this.log('‚¨ÖÔ∏è Moved left', 'player');
                            break;
                        case 'd':
                            this.movePlayer(30, 0);
                            this.log('‚û°Ô∏è Moved right', 'player');
                            break;
                        case ' ':
                            this.confirmPlayerAction();
                            break;
                    }
                });
            }
            
            movePlayer(deltaX, deltaY) {
                this.playerPosition.x = Math.max(10, Math.min(760, this.playerPosition.x + deltaX));
                this.playerPosition.y = Math.max(10, Math.min(560, this.playerPosition.y + deltaY));
                this.player.style.left = this.playerPosition.x + 'px';
                this.player.style.top = this.playerPosition.y + 'px';
            }
            
            confirmPlayerAction() {
                if (this.turnPhase !== 'Player') return;
                
                this.log('üêπ Player moved forward', 'player');
                this.turnPhase = 'Enemy';
                this.phaseTimer = 1000;
                
                setTimeout(() => this.enemyPhase(), 500);
            }
            
            enemyPhase() {
                if (this.turnPhase !== 'Enemy') return;
                
                this.log('üêç Snakes moving towards player...', 'enemy');
                
                // Move enemies towards player using TopDown Engine AI simulation
                this.enemies.forEach(enemyId => {
                    if (this.enemyHealth[enemyId] > 0) {
                        const enemy = document.getElementById(enemyId);
                        const pos = this.enemyPositions[enemyId];
                        
                        // Simple AI movement towards player
                        const deltaX = this.playerPosition.x - pos.x;
                        const deltaY = this.playerPosition.y - pos.y;
                        
                        const moveX = Math.sign(deltaX) * Math.min(20, Math.abs(deltaX));
                        const moveY = Math.sign(deltaY) * Math.min(20, Math.abs(deltaY));
                        
                        pos.x += moveX;
                        pos.y += moveY;
                        
                        enemy.style.left = pos.x + 'px';
                        enemy.style.top = pos.y + 'px';
                    }
                });
                
                this.turnPhase = 'Minion';
                setTimeout(() => this.minionPhase(), 1000);
            }
            
            minionPhase() {
                if (this.turnPhase !== 'Minion') return;
                
                this.log('üëª Ghosts drifting randomly...', 'enemy');
                this.turnPhase = 'Resolution';
                setTimeout(() => this.resolutionPhase(), 1000);
            }
            
            resolutionPhase() {
                if (this.turnPhase !== 'Resolution') return;
                
                this.log('‚öîÔ∏è Resolving collisions...', 'combat');
                
                // Check for combat
                this.enemies.forEach(enemyId => {
                    if (this.enemyHealth[enemyId] > 0) {
                        const pos = this.enemyPositions[enemyId];
                        const distance = Math.sqrt(
                            Math.pow(this.playerPosition.x - pos.x, 2) + 
                            Math.pow(this.playerPosition.y - pos.y, 2)
                        );
                        
                        // Player attacks enemies in range
                        if (distance < 80 && Math.random() < 0.4) {
                            this.enemyHealth[enemyId] -= 25;
                            const snakeName = enemyId.replace(/[0-9]/g, '');
                            const displayName = snakeName === 'ribbon' ? 'RibbonSnake' : 
                                              snakeName === 'boa' ? 'BoaHugger' : 
                                              snakeName === 'cobra' ? 'GlitterCobra' : snakeName;
                            this.log(`üåª Sunflower seed hit ${displayName}! Health: ${this.enemyHealth[enemyId]}`, 'combat');
                            
                            if (this.enemyHealth[enemyId] <= 0) {
                                document.getElementById(enemyId).style.opacity = '0.3';
                                this.log(`üíÄ ${displayName} defeated!`, 'combat');
                            }
                        }
                        
                        // Enemies attack player if close
                        if (distance < 60 && Math.random() < 0.3) {
                            this.playerHealth -= 15;
                            this.log(`üêç Snake attacked! Player health: ${this.playerHealth}`, 'combat');
                            
                            if (this.playerHealth <= 0) {
                                this.playerDeath();
                                return;
                            }
                        }
                    }
                });
                
                // Special ability chance
                this.specialCooldown--;
                if (this.specialCooldown <= 0 && Math.random() < 0.2) {
                    this.useSpecialAbility();
                }
                
                this.turnCount++;
                this.turnPhase = 'Player';
            }
            
            useSpecialAbility() {
                this.log('üí® SQUEAK OF THE DAMNED! All enemies knocked back!', 'special');
                this.specialCooldown = 5;
                
                this.enemies.forEach(enemyId => {
                    if (this.enemyHealth[enemyId] > 0) {
                        const pos = this.enemyPositions[enemyId];
                        const deltaX = pos.x - this.playerPosition.x;
                        const deltaY = pos.y - this.playerPosition.y;
                        
                        pos.x += Math.sign(deltaX) * 50;
                        pos.y += Math.sign(deltaY) * 50;
                        
                        pos.x = Math.max(50, Math.min(750, pos.x));
                        pos.y = Math.max(50, Math.min(550, pos.y));
                        
                        const enemy = document.getElementById(enemyId);
                        enemy.style.left = pos.x + 'px';
                        enemy.style.top = pos.y + 'px';
                        
                        const snakeName = enemyId.replace(/[0-9]/g, '');
                        const displayName = snakeName === 'ribbon' ? 'RibbonSnake' : 
                                          snakeName === 'boa' ? 'BoaHugger' : 
                                          snakeName === 'cobra' ? 'GlitterCobra' : snakeName;
                        this.log(`üå™Ô∏è ${displayName} pushed away by hamster squeak!`, 'special');
                    }
                });
            }
            
            playerDeath() {
                this.log('üíÄ NecroHAMSTO died!', 'death');
                this.log('üëª GhostHamsto spawned at death location', 'death');
                this.log('üßü ZombieHamsto shambling towards nearest snake', 'death');
                this.log('üîÆ Respawning at Phylactery...', 'respawn');
                
                setTimeout(() => {
                    this.playerHealth = 100;
                    this.playerPosition = { x: 385, y: 285 };
                    this.player.style.left = this.playerPosition.x + 'px';
                    this.player.style.top = this.playerPosition.y + 'px';
                    this.log('‚ú® NecroHAMSTO respawned! The Burrow Remembers...', 'respawn');
                    this.turnPhase = 'Player';
                }, 2000);
            }
            
            startGameLoop() {
                setInterval(() => {
                    // Game loop for animations and updates
                }, 100);
            }
            
            log(message, type = 'system') {
                const timestamp = new Date().toLocaleTimeString();
                const entry = document.createElement('div');
                entry.className = `log-entry log-${type}`;
                entry.textContent = `[${timestamp}] ${message}`;
                
                this.logs.appendChild(entry);
                this.logs.scrollTop = this.logs.scrollHeight;
                
                // Keep only last 50 messages
                while (this.logs.children.length > 50) {
                    this.logs.removeChild(this.logs.firstChild);
                }
            }
        }
        
        // Initialize the TopDown Engine validator when page loads
        window.addEventListener('load', () => {
            new TopDownEngineValidator();
        });
    </script>
</body>
</html>